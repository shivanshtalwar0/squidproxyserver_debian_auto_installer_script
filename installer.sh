sudo apt update && sudo apt upgrade -y && sudo apt install squid -y
echo -e '# Recommended minimum configuration:\n#\n\n#Default: debug_options ALL,1\n#more    : debug_options ALL,1 33,2 28,9\ndebug_options ALL,1 28,3\n\nrefresh_pattern -i (/cgi-bin/|\\?) 0 0% 0\nrefresh_pattern .            0 20% 4320\nmaximum_object_size 8192 KB\ncache_dir ufs /var/spool/squid 8192 16 128\ncache_log none\ncache_store_log none\ncache_mem 512 MB\n\n#####################################################################################\n\n# Example rule allowing access from your local networks.\n\n \n\n# Adapt to list your (internal) IP networks from where browsing\n# should be allowed\nacl localnet src 10.0.0.0/8    # RFC1918 possible internal network\n#acl localnet src 172.16.0.0/12    # RFC1918 possible internal network\nacl localnet src 192.168.0.0/16    # RFC1918 possible internal network\n#acl localnet src fc00::/7       # RFC 4193 local private network range\n#acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines\n\nacl SSL_ports port 443 563 445 8080 10443 27443 28443\n#acl SSL_ports port 443\nacl Safe_ports port 80        # http\nacl Safe_ports port 21        # ftp\nacl Safe_ports port 22        # telnet\nacl Safe_ports port 443    563 445 # https\nacl Safe_ports port 70        # gopher\nacl Safe_ports port 210        # wais\nacl Safe_ports port 1025-65535    # unregistered ports\nacl Safe_ports port 280        # http-mgmt\nacl Safe_ports port 488        # gss-http\nacl Safe_ports port 591        # filemaker\nacl Safe_ports port 777        # multiling http\nacl CONNECT method CONNECT\n\n#\n# Recommended minimum Access Permission configuration:\n#\n# Deny requests to certain unsafe ports\nhttp_access deny !Safe_ports\n\n# Deny CONNECT to other than secure SSL ports\n#http_access deny CONNECT !SSL_ports\n\n#\n# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS\n#\n##################################################################\n\n\n# one who can access services on localhost is a local user\nhttp_access deny to_localhost\n\n# Example rule allowing access from your local networks.\n# Adapt localnet in the ACL section to list your (internal) IP networks\n# from where browsing should be allowed\nhttp_access allow localnet\nhttp_access allow localhost\n\n# And finally deny all other access to this proxy\nhttp_access allow all\n\n# Squid normally listens to port 3128\nhttp_port 3128\n\n# Uncomment and adjust the following to add a disk cache directory.\n#cache_dir ufs /var/spool/squid 100 16 256\n\n# Leave coredumps in the first cache dir\ncoredump_dir /var/spool/squid\n\n#\n# Add any of your own refresh_pattern entries above these.\n#\nrefresh_pattern ^ftp:        1440    20%    10080\nrefresh_pattern ^gopher:    1440    0%    1440\nrefresh_pattern -i (/cgi-bin/|\\?) 0    0%    0\nrefresh_pattern .        0    20%    4320\n' > /etc/squid/squid.conf && sudo service squid restart
